
<div class="election-app cf">
  <div aria-live="polite" id="election-app-anouncer" class="sr-only"></div>

  {{#if (election && election.test) }}
    <div class="test-notice">Currently serving test results, live results will show up starting around 8:00pm on election night.</div>
  {{/if}}

  <GroupNav router="{{ router }}" />

  <div class="election-app-main" aria-relevant="all">
    {{#if page === 'contest'}}
      <Contest id="{{ contestID }}" />
    {{elseif page === 'set'}}
      <Set setID="{{ setID }}" />
    {{elseif page === 'search'}}
      <Search searchData="{{ searchData }}" showResults="true" router="{{ router }}" searchQuery="{{ searchQuery }}" />
    {{else}}
      <Search searchData="{{ searchData }}" router="{{ router }}" />
      <Dashboard data="{{ election }}" searchData="{{ searchData }}" />
    {{/if}}
  </div>
</div>


<script>
import Dashboard from './dashboard.svelte.html';
import Search from './search.svelte.html';
import Contest from './contest.svelte.html';
import GroupNav from './group-nav.svelte.html';
import Set from './set.svelte.html';

export default {
  components: {
    Contest,
    Dashboard,
    GroupNav,
    Set,
    Search
  },

  oncreate: function() {
    // Proxy if used within another component
    this.observe('data', d => {
      if (_.isPlainObject(d)) {
        this.set(d);
      }
    });
  }
};
</script>
